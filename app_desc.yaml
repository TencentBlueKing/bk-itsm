spec_version: 2
app_version: "1.0"
app:
    region: default
    bk_app_code: bk_itsm
    bk_app_name: 流程服务
    market:
        category: 运维工具
        introduction: 流程服务
        description: 【流程服务】是蓝鲸推出的轻量级ITSM，通过可自定义设计的流程模块，覆盖IT服务中的不同管理活动或应用场景。帮助企业用户规范内部管理流程，提升沟通及管理效率。
        display_options:
            width: 1280
            height: 720
            is_win_maximize: True
            open_mode: "new_tab"
modules:
    default:
        is_default: True
        source_dir: ./src
        language: Python
        services:               
            - name: mysql
            - name: rabbitmq
            - name: redis
            - name: bkrepo
        env_variables:
            - key: PIP_VERSION
              value: 20.2.3
              description: PIP版本
            - key: RUN_VER
              value: open
              description: 运行环境
        processes:
            web:
                command: gunicorn wsgi -w 8 -b :$PORT --access-logfile - --error-logfile - --access-logformat '[%(h)s] %({request_id}i)s %(u)s %(t)s "%(r)s" %(s)s %(D)s %(b)s "%(f)s" "%(a)s"' --max-requests=200 --log-level debug --timeout 120
                plan: 4C2G5R
                replicas: 5
            beat:
                command: python manage.py celery beat -l info
                plan: 4C1G5R
                replicas: 1
            pworker:
                command: python manage.py celery worker -n prefork@%h -c 4 -l info -O fair --maxtasksperchild=100
                plan: 4C2G5R
                replicas: 5
            gworker:
                command: python manage.py celery worker -P gevent -n gevent@%h -c 4 -l info --maxtasksperchild=100
                plan: 4C2G5R
                replicas: 5
        svc_discovery:
            bk_saas:
                -   bk_app_code: "bk_itsm"
